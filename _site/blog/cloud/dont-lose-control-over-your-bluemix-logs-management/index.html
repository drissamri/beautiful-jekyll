<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Don't lose control: Bluemix logs management</title>

  <meta name="author" content="Driss Amri" />
  
  

  <link rel="alternate" type="application/rss+xml" title="Driss Amri - A software engineer and web developer. Consider myself a World Citizen, love to travel." href="/feed.xml" />

  
    
      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
    
    
  
  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  
  
  
    
	  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
	  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

    
  
  
  
  
  
  <!-- Facebook OpenGraph tags -->
  <meta property="og:title" content="Don't lose control: Bluemix logs management" />
  <meta property="og:type" content="website" />
  
  
  <meta property="og:url" content="http://driss2.github.io/blog/cloud/dont-lose-control-over-your-bluemix-logs-management//" />
  
  
  
  <meta property="og:image" content="http://driss2.github.io/img/avatar-icon.png" />
  
  
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://driss2.github.io">Driss Amri</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
	    
        <li>
		  <a href="/">Home</a>
		</li>
		
        <li>
		  <a href="/publications">Publications</a>
		</li>
		
        <li>
		  <a href="/aboutme">About Me</a>
		</li>
		
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://driss2.github.io ">
	      <img class="avatar-img" src="/img/avatar-icon.png" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  

    <div role="main" class="container main-content">
      <header class="header-post">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <div class="post-heading">
        <h1>Don't lose control: Bluemix logs management</h1>
        
        <span class="post-meta">Posted on March 5, 2015</span>
      </div>
     </div>
  </div>
</header>

<article>
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	  <p>Lately I have been busy deploying more Cloud based applications, mostly on <a href="https://console.ng.bluemix.net/">Bluemix</a>. I try to following a <a href="http://www.drissamri.be/blog/architecture/what-are-microservices/">Microservices</a> (or Service Oriented) Architecture approach so I have multiple applications working together.
 At a certain point following up on the status of these systems should not be a manual job anymore. This is why I decided take a first step to managing my infrastructure better by centralizing my all my log files in one system.</p>

<p>There are quite a few logging solutions out there. From the super popular <a href="http://www.elasticsearch.org/overview/elkdownloads/">ElasticSearch/Logstash/Kibana (ELK)</a> open-source stack to online Software-as-a-Service (SaaS) log management systems. Today, I wanted to get started quickly with my Bluemix logs management so I decided to try out one of these SaaS logging services, but in the future I will also be playing around with the ELK stack.</p>

<p>If you are using WebSphere Liberty or node.js on Bluemix, you can easily get started with the provided <a href="https://www.ng.bluemix.net/docs/#services/monana/index.html">IBM Monitoring and Analytics</a> service.
 This will not work for me since I’m working with my <a href="http://www.drissamri.be/blog/rest/building-your-own-linkshortener-api/">Linkshortener</a> application, which is a Spring Boot application that runs on an embedded Tomcat application server.</p>

<p>I decided to take a look around to see what kind of other online services are available, and after quickly Googling I was directed to plenty of options:</p>

<ul>
  <li><a href="https://logentries.com/">Logentries</a></li>
  <li><a href="https://www.loggly.com/">Loggly</a></li>
  <li><a href="https://papertrailapp.com/">Papertrail</a></li>
</ul>

<p>Since Bluemix is based upon Cloud Foundry, I went to take a look at the Cloud Foundry documentation because it is so extensive and usually points you in the right direction. There is quite some information available about log management which is handled by their <a href="http://docs.cloudfoundry.org/devguide/deploy-apps/streaming-logs.html">Loggragator</a> which is very capable of handling <a href="http://docs.cloudfoundry.org/devguide/services/log-management.html">3th party logging services</a>. It even has instructions about how to integrate your logging with certain <a href="http://docs.cloudfoundry.org/devguide/services/log-management-thirdparty-svc.html">Third-Party Log management services</a>.</p>

<p>I decided to give Papertrail a shot, but definitely will try out different services out in the future.</p>

<h3 id="step-1-setup-your-papertrail-account">Step 1: Setup your Papertrail account</h3>

<p>Just go to <a href="https://papertrailapp.com/plans">https://papertrailapp.com/plans</a> and sign up for your desired plan. I just went with their free account which lets me hold my logs for 7 days, which is sufficient for me, for now.</p>

<p>Add a system to your account.</p>

<p><img src="http://driss2.github.io/img/post/papertrail-add.png" alt="Choose to add a system" /></p>

<p>Now you will see your Papertrail endpoint, which you will need to write down since it will be needed in a bit to point your logging service in Bluemix to this endpoint. Since we are using Bluemix, choose the alternatives logs method.</p>

<p><img src="http://driss2.github.io/img/post/papertrail-endpoint.jpg" alt="Your Papertrail endpoint URL" /></p>

<p>Here you can choose Heroku, which is another online Platform-as-a-Service which is comparable to Bluemix. This option will also work for Bluemix and Cloud Foundry. So choose this option and give it a name.</p>

<p><img src="http://driss2.github.io/img/post/papertrail-cf.jpg" alt="Pick the Heroku option, which works in the same way as Bluemix and Cloud Foundry" /></p>

<p>That’s all there is to it in Papertrail. Your account is now ready to receive logs.</p>

<h3 id="step-2-create-a-logging-service-in-bluemix">Step 2: Create a logging service in Bluemix</h3>

<p>You can’t create the logging service through the web dashboard, so start up your console so you can work with the CF command line interface.
 We will need to create a User-Provided Service, or also known as cups (create-user-provided-service), this is done by issuing the following command: <code>cf cups SERVICE_NAME -l syslog://PAPERTRAIL_HOST:PORT</code>.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">cf cups papertrail syslog://logs2.papertrailapp.com:10163</code></pre></div>

<h3 id="step-3-bind-the-new-logging-service-to-your-application">Step 3: Bind the new logging service to your application</h3>

<p>Now your service is created and ready to be used by your applications. Now add this service to your application by using the Dashboard or the CF command line again: <code>cf bind-service APPLICATION_NAME SERVICE_NAME</code></p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">cf <span class="nb">bind</span>-service linkshortener papertrail</code></pre></div>

<p>After this you will be asked to restage or repush your application so the service is binded to your application. You can restage your application with the following command: <code>cf restage APPLICATION_NAME</code></p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">cf restage linkshortener</code></pre></div>

<h2 id="bluemix-logs-management">Bluemix logs management</h2>

<p>When you completed the previous steps, as soon as your application starts logging it will be forwarded to Papertrail and it should appear in your dashboard.</p>

<p><img src="http://driss2.github.io/img/post/papertrail-dashboard.jpg" alt="Papertrail dashboard" /></p>

<p>This is all you need to do to centralize your log files for easier management and control of your systems. If you have any suggestions for other online logging services or any tips or tips do let me know!</p>

	</div>
  </div>
</article>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <ul class="pager blog-pager">
      
      <li class="previous">
        <a href="/blog/technology/modern-java-web-applications-spring-boot-thymeleaf-angularjs/" data-toggle="tooltip" data-placement="top" title="Modern Java web applications with Spring Boot, Thymeleaf and AngularJS">&larr; Previous Post</a>
      </li>
      
      
      <li class="next">
        <a href="/blog/technology/starting-modern-java-project-with-jhipster/" data-toggle="tooltip" data-placement="top" title="Starting a modern Java project with JHipster">Next Post &rarr;</a>
      </li>
      
    </ul>
  </div>
</div>



    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          <li>
            <a href="https://www.facebook.com/driss.amri" title="Facebook">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li>
            <a href="https://github.com/drissamri" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="https://twitter.com/drams88" title="Twitter">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="mailto:hello@drissamri.be" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="https://linkedin.com/in/drissamri" title="LinkedIn">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="https://stackoverflow.com/users/492723/driss-amri" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
		  <li>
			<a href="/feed.xml" title="RSS">
			  <span class="fa-stack fa-lg">
				<i class="fa fa-circle fa-stack-2x"></i>
				<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
			  </span>
			</a>
		  </li>
          
        </ul>


                <div id="mc_embed_signup">
<form action="//drissamri.us10.list-manage.com/subscribe/post?u=26e893f61b307e44d625b0ec2&amp;id=7410ab3d05" method="post"
id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
  <div class="signup" id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Subscribe to newsletter</label>

	    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email" required>
      <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
      <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
      <div style="position: absolute; left: -5000px;"><input type="text" name="b_26e893f61b307e44d625b0ec2_7410ab3d05" tabindex="-1" value=""></div>
      <div class="clear"></div>
  </div>
</form>
</div>


        <p class="copyright text-muted">
		  &copy; Driss Amri
		  &nbsp;&bull;&nbsp;
		  2015

		  
		  &nbsp;&bull;&nbsp;
		  <a href="http://driss2.github.io">drissamri.be</a>
		  
	    </p>
		<p class="theme-by text-muted">
		  Theme by
		  <a href="https://github.com/daattali/beautiful-jekyll">beautiful-jekyll</a>
		</p>
      </div>
    </div>
  </div>
</footer>


    


  
	<script src="/js/jquery-1.11.2.min.js"></script>
  
	<script src="/js/bootstrap.min.js"></script>
  
	<script src="/js/main.js"></script>
  
	<script src="/js/https-redirect.js"></script>
  







	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-62990349-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
